======================
Payment Token Uniquify
======================

.. 
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:29f6342a158b7fd7e676a79c1de9d81d1160c13d0eb512705af175c82c5ae45d
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Alpha-red.png
    :target: https://odoo-community.org/page/development-status
    :alt: Alpha
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-commown%2Fcommown--odoo--addons-lightgray.png?logo=github
    :target: https://github.com/commown/commown-odoo-addons/tree/12.0/payment_token_uniquify
    :alt: commown/commown-odoo-addons

|badge1| |badge2| |badge3|

This module extends the functionality of the payment module which
defines the payment token model, associated to a partner.

The module adds the ability to automatically archive or delete old
payment tokens when a new one is created. The payment tokens
considered obsolete depend on the setting of the
`isolated_payment_tokens` field of the partner associated to the
token, as well as its ancestors. See the configure section for
details.

.. IMPORTANT::
   This is an alpha version, the data model and design can change at any time without warning.
   Only for development or testing purpose, do not use in production.
   `More details on development status <https://odoo-community.org/page/development-status>`_

**Table of contents**

.. contents::
   :local:

Configuration
=============

The module must be set in 2 ways:

1. Define which payment tokens become obsolete

   First point is handled by a specific field on the partner called
   `isolated_payment_tokens`: we go **up** the partner tree from the
   new mandate signee; first partner without a parent or with a parent
   which `isolated_payment_token` field is set to True defines the
   subtree where all mandates will be obsoleted by the new one.

   The action taken for obsolete tokens depends on the settings
   described in the next section.

2. Define what to do with obsolete payment tokens

   Go to the payment acquirer's form and choose the desired behaviour:
   do nothing (the default), archive the odoo payment token or archive
   and revocate it with the payment acquirer (if implemented).

Usage
=====

This module has to be setup (see the configure section) and there is
no more instructions to follow afterwards.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/commown/commown-odoo-addons/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://github.com/commown/commown-odoo-addons/issues/new?body=module:%20payment_token_uniquify%0Aversion:%2012.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
~~~~~~~

* Commown SCIC

Contributors
~~~~~~~~~~~~

* Florent Cayr√© <florent@commown.coop> (https://commown.coop)

Maintainers
~~~~~~~~~~~

.. |maintainer-fcayre| image:: https://github.com/fcayre.png?size=40px
    :target: https://github.com/fcayre
    :alt: fcayre

Current maintainer:

|maintainer-fcayre| 

This module is part of the `commown/commown-odoo-addons <https://github.com/commown/commown-odoo-addons/tree/12.0/payment_token_uniquify>`_ project on GitHub.

You are welcome to contribute.
