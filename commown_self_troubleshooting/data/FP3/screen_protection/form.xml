<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <record id="fp3-screen-protection" model="ir.ui.view">
    <field name="name">Self-troubleshoot an FP3 screen protection</field>
    <field name="type">qweb</field>
    <field name="key">website.self-troubleshoot-fp3-screen-protection</field>
    <field name="arch" type="xml">

    <t t-name="website.self-troubleshoot-fp3-screen-protection">
      <t t-call="commown-self-troubleshoot.web-layout">
        <t t-set="title">Commown - Auto-dépannage - Fairphone 3 : Je n'ai pas de protection d'écran</t>
        <t t-set="head">
          <script type="text/javascript">

            $(document).ready(function() {

              const wizard = setUpWizard($('#smartwizard'));

             $('#type_problem_ok').change(function () {
                  wizard.toggleStep(2, this.value==='no_protection');
                  wizard.toggleStep(5, this.value==='no_protection');
              });

              $('input[type=radio][name=airglass_present]').change(function () {
                 wizard.toggleStep(3, this.value==='not_solved');
                 wizard.toggleStep(4, this.value==='not_solved');
                 wizard.toggleStep(5, this.value==='solved');
              });

            });

          </script>
        </t>

        <!-- Variables à modifier ici -->
        <t t-set="contract_name_like">FP3/</t>
        <t t-set="tag_names">Appareil FP3</t>
        <t t-set="issue_title">FP3 - Protection d'écran</t>
        <t t-set="issue_description_template">issue-description-fp3-screen-protection</t>
        <!-- Fin des variables à modifier -->

        <div class="container">
          <h1>Auto-dépannage : Fairphone 3</h1>
          <h2>Ma protection d'écran est fissurée / endomagée</h2>
          <br/>
          <form action="/self-troubleshoot/" method="post" accept-charset="utf-8"
                id="myForm" role="form">

            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
            <input type="hidden" name="self-troubleshoot-type" id="self-troubleshoot-type" t-att-value="issue_title"/>
            <input type="hidden" name="tags" id="tags" t-att-value="tag_names"/>
            <input type="hidden" name="issue-description-template" id="issue-description-template" t-att-value="issue_description_template"/>

            <div id="smartwizard">
              <ul>
                <li><a href="#step-0">Contexte<br/><small>Appareil concerné</small></a></li>
                <li><a href="#step-1">Étape 1<br/><small>Type de problème</small></a></li>
                <li disabled="disabled"><a href="#step-2">Étape 2<br/><small>Vérification</small></a></li>
                <li disabled="disabled"><a href="#step-3">Étape 3<br/><small>Expédition</small></a></li>
                <li disabled="disabled"><a href="#step-4">Étape 4<br/><small>Confirmation</small></a></li>
                <li disabled="disabled"><a href="#step-5">Étape 5<br/><small>Problème résolu</small></a></li>
                <li><a href="#step-6">Étape 6<br/><small>Contacter un humain</small></a></li>
              </ul>

              <div>
                <t t-call="commown_self_troubleshooting.step-contract-choice"/>

                <div id="step-1">
                  <h2><i class="fas fa-cogs"/> Type de problème </h2>
                  <div id="form-step-1" role="form" data-toggle="validator">
                    <div class="form-group">
                      <label for="type_problem">Quelle est votre situation ?</label>
                      <select class="form-control" required="required" id="type_problem_ok" name="type_problem_ok" data-required-error="Veuillez sélectionner un élément de la liste ci-dessus.">
                        <option disabled="disabled" selected="1" value="">-- Choisir une réponse --</option>
                        <option value="cracked">Ma protection d'écran se décolle / est fissurée</option>
                        <option value="no_protection">Je n'ai pas de protection d'écran</option>
                      </select>
                      <div class="help-block with-errors"/>
                    </div>
                  </div>
                </div>

                <div id="step-2">
                  <h2><i class="fas fa-airglass-slash"/> Verification </h2>
                  <div id="form-step-2" role="form" data-toggle="validator">
                    <div class="form-group">
                      <p>Il est possible que vous possédiez déjà une protection d'écran. Pour le vérifier, veuillez insérer un ongle dans un des coins supérieurs de l'appareil.</p>
                      <label>Pouvez-vous nous confirmer que vous n'avez pas du tout de protection d'écran ? </label>
                      <br/>
                      <label class="radio-inline" for="airglass-yes">Je n'ai pas de protection d'écran</label>
                      <input type="radio" name="airglass_present" id="airglass-yes" value="not_solved" required="required" data-required-error="Dites-nous si vous entendez du son."/>
                      <label class="radio-inline" for="airglass-no">J'ai une protection d'écran</label>
                      <input type="radio" name="airglass_present" id="airglass-no" value="solved" required="required"/>
                      <div class="help-block with-errors"/>
                    </div>
                  </div>
                </div>

                <t t-call="commown_self_troubleshooting.step-ship-module">
                  <t t-set="step">3</t>
                  <t t-set="new_module">une protection d'écran</t>
                </t>

                <t t-call="commown_self_troubleshooting.step-confirm-change">
                  <t t-set="step">4</t>
                </t>

                <t t-call="commown_self_troubleshooting.step-self-solved">
                  <t t-set="step">5</t>
                </t>

                <t t-call="commown_self_troubleshooting.step-contact-human">
                  <t t-set="step">6</t>
                </t>

              </div>

            </div>
          </form>
        </div>

      </t>
    </t>

    </field>
  </record>

</odoo>
